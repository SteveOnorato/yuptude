## What is this?

A bookmarklet for controlling video playback for almost any website.

This is my fork of yuptude (https://github.com/Pepck/yuptude), adding some features that I wanted:
* Avoid UI getting stuck on page when launched multiple times.
* Keep speed/pitch after closing the UI.
* Restore the previous speed/pitch to the UI when launched again.
* Open yuptude link in a new tab.
* Keyboard shortcuts:
  * Q: Skip backward
  * W: Pause/Play
  * E: Skip forward
  * A: Slow down
  * S: Reset to 1x speed
  * D: Speed up

## Install 

Bookmark (can drag and drop) any/all of these links:
{% raw %}
<a href="javascript:void%20function(){function%20a(a){return%20document.getElementById(a)}function%20b(){y=a(%22yptd-in%22).value,window.sessionStorage.setItem(%22yuptudeSpeed%22,y)}function%20c(){r.removeEventListener(%22input%22,b),t.removeEventListener(%22click%22,c),u.removeEventListener(%22click%22,d),w.removeEventListener(%22click%22,f),x.removeEventListener(%22click%22,g),window.removeEventListener(%22keypress%22,l),o.parentNode.removeChild(o),q.parentNode.removeChild(q),clearInterval(A)}function%20d(){z=a(%22yptd-pin%22).checked,window.sessionStorage.setItem(%22yuptudePitch%22,z)}function%20f(){e=a(%22yptd-in%22).value,e=e%3FparseFloat(e):1,e=3.9%3E=e%3Fe+.1:e,h(e)}function%20g(){e=a(%22yptd-in%22).value,e=e%3FparseFloat(e):1,e=.6%3C=e%3Fe-.1:e,h(e)}function%20h(b){y=b.toFixed(1),a(%22yptd-in%22).value=y,window.sessionStorage.setItem(%22yuptudeSpeed%22,y)}function%20i(a){m=document.querySelectorAll(%22video%22);for(var%20b=0;b%3Cm.length;b++)n=m[b],n%26%262%3C=n.readyState%26%26(n.playbackRate=a||y||1,n.mozPreservesPitch=n.webkitPreservesPitch=n.preservePitch=!z)}function%20j(a){m=document.querySelectorAll(%22video%22);for(var%20b=0;b%3Cm.length;b++)n=m[b],n%26%262%3C=n.readyState%26%26(n.currentTime+=a)}function%20k(){m=document.querySelectorAll(%22video%22),all_paused=!0;for(var%20a=0;a%3Cm.length;a++)n=m[a],n%26%262%3C=n.readyState%26%26!n.paused%26%26(all_paused=!1,n.pause());if(all_paused)for(var%20a=0;a%3Cm.length;a++)n=m[a],n%26%262%3C=n.readyState%26%26n.play()}function%20l(a){%22d%22===a.key%3Ff():%22s%22===a.key%3Fh(1):%22a%22===a.key%3Fg():%22q%22===a.key%3Fj(-10):%22w%22===a.key%3Fk():%22e%22===a.key%26%26j(10)}if(null!==a(%22yptd%22))return%20void%20console.log(%22yuptude's%20already%20running!%22);console.log(%22Starting%20yuptude!%22);var%20m,n,e,o=document.createElement(%22div%22);o.innerHTML=%22%3Cstyle%20id=\%22yptd-style\%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%23yptd%20span,%23yptd-box{float:left;padding:0%20.5em;display:block}%23yptd%20span%20em,%23yptd-bottom,%23yptd-in{vertical-align:middle}%23yptd-pit,%23yptd-pit%20input{float:right}%23yptd%20a,%23yptd-bar{background-color:%23fd0d5d}%23yptd{z-index:9999999999;position:fixed;bottom:0;left:6px;font:16px%20Helvetica,Arial,sans-serif;-webkit-text-size-adjust:100%25;-ms-text-size-adjust:100%25}%23yptd%20*{margin:0}%23yptd%20a{border-radius:5px;-moz-border-radius:5px;-webkit-border-radius:5px;float:left;margin:0%20.5em%200%200;padding:.25em%201em;font-weight:700;color:%23FFF}%23yptd%20a%20em{font-size:.9em}%23yptd%20a:active,%23yptd%20a:focus,%23yptd%20a:hover{outline:0;color:%23fd0d5d;background-color:%23FFF;text-decoration:none}%23yptd%20span{border-radius:3px;-moz-border-radius:3px;-webkit-border-radius:3px;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;margin:.5em;width:2.5em;border-bottom:2px%20solid%20rgba(0,0,0,.25);text-decoration:none;color:%23000;background-color:%23FFF;cursor:pointer;text-align:center}%23yptd%20span%20em{font-size:.75em}%23yptd%20span:active,%23yptd%20span:focus,%23yptd%20span:hover{color:%23fd0d5d}%23yptd-bar{border-radius:3px%203px%200%200;-moz-border-radius:3px%203px%200%200;-webkit-border-radius:3px%203px%200%200;height:2.25em}%23yptd-bar:after,%23yptd-bottom:after{content:\%22\%22;display:block;clear:both}%23yptd-controls{float:right;height:2.25em;border-left:2px%20solid%20rgba(0,0,0,.33)}%23yptd-box{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;width:4em;min-width:4em;height:100%25;background-color:rgba(0,0,0,.15)}%23yptd-in{width:100%25;height:100%25;border:0;text-align:center;font:14px%20Helvetica,Arial,sans-serif;font-family:Helvetica,Arial,sans-serif;font-size:14px;color:%23FFF;background-color:transparent}%23yptd-bottom{padding:.75em;font-size:.75em;background-color:rgba(0,0,0,.8)}%23yptd-pit{position:relative;padding:.25em%200}%23yptd-pit%20label{margin-right:.5em;color:%23FFF}%23yptd-pit%20em{display:none}%23yptd-pit:active%20em,%23yptd-pit:focus%20em,%23yptd-pit:hover%20em{display:block;position:absolute;top:-2.5em;left:0;padding:.5em;white-space:pre;font-size:.8em;background-color:%23fd0d5d}%20%20%20%20%20%20%20%20%20%20%20%20%3C/style%3E%20%20%20%20%20%20%20%20%3Cdiv%20id=\%22yptd\%22%3E%3Cdiv%20id=\%22yptd-bar\%22%3E%3Cspan%20id=\%22yptd-off\%22%3E%3Cem%3EHide%3C/em%3E%3C/span%3E%3Cdiv%20id=\%22yptd-controls\%22%3E%3Cspan%20id=\%22yptd-dwn\%22%3E-%3C/span%3E%3Cdiv%20id=\%22yptd-box\%22%3E%3Cinput%20id=\%22yptd-in\%22%20type=\%22text\%22%20value=\%221.0\%22%3E%3C/div%3E%3Cspan%20id=\%22yptd-up\%22%3E+%3C/span%3E%3C/div%3E%3C/div%3E%3Cdiv%20id=\%22yptd-bottom\%22%3E%3Ca%20href=\%22http://yuptude.com\%22%20target=\%22_blank\%22%3E%3Cem%3Eyuptude%3C/em%3E%3C/a%3E%3Cdiv%20id=\%22yptd-pit\%22%3E%3Clabel%20for=\%22yptd-pin\%22%3E%20Shift%20Pitch%20%3Cem%3E(Firefox%20%26amp;%20Safari%20only)%3C/em%3E%3C/label%3E%3Cinput%20type=\%22checkbox\%22%20name=\%22yptd-pin\%22%20id=\%22yptd-pin\%22%20value=\%221\%22%3E%3C/div%3E%3C/div%3E%3C/div%3E%22,document.body.appendChild(o);var%20o=a(%22yptd%22),q=a(%22yptd-style%22),r=a(%22yptd-in%22),t=a(%22yptd-off%22),u=a(%22yptd-pin%22),w=a(%22yptd-up%22),x=a(%22yptd-dwn%22),y=window.sessionStorage.getItem(%22yuptudeSpeed%22);null===y%3Fy=1:(console.log(%22Recovered%20speed%20%22+y),a(%22yptd-in%22).value=y);var%20z=window.sessionStorage.getItem(%22yuptudePitch%22);null===z%3Fz=!1:(console.log(%22Recovered%20pitch%20%22+z),a(%22yptd-pin%22).checked=z),r.addEventListener(%22input%22,b),t.addEventListener(%22click%22,c),u.addEventListener(%22click%22,d),w.addEventListener(%22click%22,f),x.addEventListener(%22click%22,g);var%20A=setInterval(function(){i()},100);window.addEventListener(%22keypress%22,l,!1)}();">Yuptude (Bottom Left)</a>

<a href="javascript:void%20function(){function%20a(a){return%20document.getElementById(a)}function%20b(){y=a(%22yptd-in%22).value,window.sessionStorage.setItem(%22yuptudeSpeed%22,y)}function%20c(){r.removeEventListener(%22input%22,b),t.removeEventListener(%22click%22,c),u.removeEventListener(%22click%22,d),w.removeEventListener(%22click%22,f),x.removeEventListener(%22click%22,g),window.removeEventListener(%22keypress%22,l),o.parentNode.removeChild(o),q.parentNode.removeChild(q),clearInterval(A)}function%20d(){z=a(%22yptd-pin%22).checked,window.sessionStorage.setItem(%22yuptudePitch%22,z)}function%20f(){e=a(%22yptd-in%22).value,e=e%3FparseFloat(e):1,e=3.9%3E=e%3Fe+.1:e,h(e)}function%20g(){e=a(%22yptd-in%22).value,e=e%3FparseFloat(e):1,e=.6%3C=e%3Fe-.1:e,h(e)}function%20h(b){y=b.toFixed(1),a(%22yptd-in%22).value=y,window.sessionStorage.setItem(%22yuptudeSpeed%22,y)}function%20i(a){m=document.querySelectorAll(%22video%22);for(var%20b=0;b%3Cm.length;b++)n=m[b],n%26%262%3C=n.readyState%26%26(n.playbackRate=a||y||1,n.mozPreservesPitch=n.webkitPreservesPitch=n.preservePitch=!z)}function%20j(a){m=document.querySelectorAll(%22video%22);for(var%20b=0;b%3Cm.length;b++)n=m[b],n%26%262%3C=n.readyState%26%26(n.currentTime+=a)}function%20k(){m=document.querySelectorAll(%22video%22),all_paused=!0;for(var%20a=0;a%3Cm.length;a++)n=m[a],n%26%262%3C=n.readyState%26%26!n.paused%26%26(all_paused=!1,n.pause());if(all_paused)for(var%20a=0;a%3Cm.length;a++)n=m[a],n%26%262%3C=n.readyState%26%26n.play()}function%20l(a){%22d%22===a.key%3Ff():%22s%22===a.key%3Fh(1):%22a%22===a.key%3Fg():%22q%22===a.key%3Fj(-10):%22w%22===a.key%3Fk():%22e%22===a.key%26%26j(10)}if(null!==a(%22yptd%22))return%20void%20console.log(%22yuptude's%20already%20running!%22);console.log(%22Starting%20yuptude!%22);var%20m,n,e,o=document.createElement(%22div%22);o.innerHTML=%22%3Cstyle%20id=\%22yptd-style\%22%3E%20%20%20%20%20%20%20%20%20%20%20%20%23yptd%20span,%23yptd-box{float:left;padding:0%20.5em;display:block}%23yptd%20span%20em,%23yptd-bottom,%23yptd-in{vertical-align:middle}%23yptd-pit,%23yptd-pit%20input{float:right}%23yptd%20a,%23yptd-bar{background-color:%23fd0d5d}%23yptd{z-index:9999999999;position:fixed;top:0;right:6px;font:16px%20Helvetica,Arial,sans-serif;-webkit-text-size-adjust:100%25;-ms-text-size-adjust:100%25}%23yptd%20*{margin:0}%23yptd%20a{border-radius:5px;-moz-border-radius:5px;-webkit-border-radius:5px;float:left;margin:0%20.5em%200%200;padding:.25em%201em;font-weight:700;color:%23FFF}%23yptd%20a%20em{font-size:.9em}%23yptd%20a:active,%23yptd%20a:focus,%23yptd%20a:hover{outline:0;color:%23fd0d5d;background-color:%23FFF;text-decoration:none}%23yptd%20span{border-radius:3px;-moz-border-radius:3px;-webkit-border-radius:3px;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;margin:.5em;width:2.5em;border-bottom:2px%20solid%20rgba(0,0,0,.25);text-decoration:none;color:%23000;background-color:%23FFF;cursor:pointer;text-align:center}%23yptd%20span%20em{font-size:.75em}%23yptd%20span:active,%23yptd%20span:focus,%23yptd%20span:hover{color:%23fd0d5d}%23yptd-bar{border-radius:3px%203px%200%200;-moz-border-radius:3px%203px%200%200;-webkit-border-radius:3px%203px%200%200;height:2.25em}%23yptd-bar:after,%23yptd-bottom:after{content:\%22\%22;display:block;clear:both}%23yptd-controls{float:right;height:2.25em;border-left:2px%20solid%20rgba(0,0,0,.33)}%23yptd-box{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;width:4em;min-width:4em;height:100%25;background-color:rgba(0,0,0,.15)}%23yptd-in{width:100%25;height:100%25;border:0;text-align:center;font:14px%20Helvetica,Arial,sans-serif;font-family:Helvetica,Arial,sans-serif;font-size:14px;color:%23FFF;background-color:transparent}%23yptd-bottom{padding:.75em;font-size:.75em;background-color:rgba(0,0,0,.8)}%23yptd-pit{position:relative;padding:.25em%200}%23yptd-pit%20label{margin-right:.5em;color:%23FFF}%23yptd-pit%20em{display:none}%23yptd-pit:active%20em,%23yptd-pit:focus%20em,%23yptd-pit:hover%20em{display:block;position:absolute;top:-2.5em;left:0;padding:.5em;white-space:pre;font-size:.8em;background-color:%23fd0d5d}%20%20%20%20%20%20%20%20%20%20%20%20%3C/style%3E%20%20%20%20%20%20%20%20%3Cdiv%20id=\%22yptd\%22%3E%3Cdiv%20id=\%22yptd-bar\%22%3E%3Cspan%20id=\%22yptd-off\%22%3E%3Cem%3EHide%3C/em%3E%3C/span%3E%3Cdiv%20id=\%22yptd-controls\%22%3E%3Cspan%20id=\%22yptd-dwn\%22%3E-%3C/span%3E%3Cdiv%20id=\%22yptd-box\%22%3E%3Cinput%20id=\%22yptd-in\%22%20type=\%22text\%22%20value=\%221.0\%22%3E%3C/div%3E%3Cspan%20id=\%22yptd-up\%22%3E+%3C/span%3E%3C/div%3E%3C/div%3E%3Cdiv%20id=\%22yptd-bottom\%22%3E%3Ca%20href=\%22http://yuptude.com\%22%20target=\%22_blank\%22%3E%3Cem%3Eyuptude%3C/em%3E%3C/a%3E%3Cdiv%20id=\%22yptd-pit\%22%3E%3Clabel%20for=\%22yptd-pin\%22%3E%20Shift%20Pitch%20%3Cem%3E(Firefox%20%26amp;%20Safari%20only)%3C/em%3E%3C/label%3E%3Cinput%20type=\%22checkbox\%22%20name=\%22yptd-pin\%22%20id=\%22yptd-pin\%22%20value=\%221\%22%3E%3C/div%3E%3C/div%3E%3C/div%3E%22,document.body.appendChild(o);var%20o=a(%22yptd%22),q=a(%22yptd-style%22),r=a(%22yptd-in%22),t=a(%22yptd-off%22),u=a(%22yptd-pin%22),w=a(%22yptd-up%22),x=a(%22yptd-dwn%22),y=window.sessionStorage.getItem(%22yuptudeSpeed%22);null===y%3Fy=1:(console.log(%22Recovered%20speed%20%22+y),a(%22yptd-in%22).value=y);var%20z=window.sessionStorage.getItem(%22yuptudePitch%22);null===z%3Fz=!1:(console.log(%22Recovered%20pitch%20%22+z),a(%22yptd-pin%22).checked=z),r.addEventListener(%22input%22,b),t.addEventListener(%22click%22,c),u.addEventListener(%22click%22,d),w.addEventListener(%22click%22,f),x.addEventListener(%22click%22,g);var%20A=setInterval(function(){i()},100);window.addEventListener(%22keypress%22,l,!1)}();">Yuptude (Top Right)</a>

{% endraw %}

## Known issues

* Doesn't work if the video is within an iframe.  The JavaScript isn't allowed to traverse into that part of the DOM.
